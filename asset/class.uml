@startuml

title Relationships - Class Diagram
package "Elements réels" <<Frame>> {
    class Domaine
    class Machine
    Domaine "1" *-- "many" Machine: Composition
}
package "Representation des états" <<Frame>> {
    abstract Etat
    abstract Etat_Domaine
    abstract Etat_Machine
    
    package "Etat du domaine" <<Frame>> {
        Etat_Domaine <|-- Etat_D_Libre: Inheritance
        Etat_Domaine <|-- Etat_D_Risque: Inheritance
        Etat_Domaine <|-- Etat_D_Occupe: Inheritance
        Etat_Domaine <|-- Etat_D_Collision: Inheritance
    }
    
    package "Etat des machines" <<Frame>>{
        Etat_Machine <|-- Etat_M_Idle: Inheritance
        Etat_Machine <|-- Etat_M_Attente_O: Inheritance
        Etat_Machine <|-- Etat_M_Attente_C: Inheritance
        Etat_Machine <|-- Etat_M_Initial: Inheritance
        Etat_Machine <|-- Etat_M_Fin_initial: Inheritance
        Etat_Machine <|-- Etat_M_Transmition: Inheritance
    }
}

package "Representation des évenements" <<Frame>>{
    abstract Event
    class Event_Never
    abstract Event_Timed
    abstract Event_Triger
    Event <|-- Event_Never: Inheritance
    Event <|-- Event_Timed: Inheritance
    Event <|-- Event_Triger: Inheritance
    Event_Timed <|-- Event_Fin_initial : Inheritance
    Event_Timed <|-- Event_Fin_transmition : Inheritance
    Event_Triger <|-- Event_Debut_parlant : Inheritance
}
Etat <|-- Etat_Domaine: Inheritance
Etat <|-- Etat_Machine: Inheritance
Domaine "1" *-- "1" Etat_Domaine: Composition
Machine "1" *-- "1" Etat_Machine: Composition

Domaine : +time
Domaine : +machines
Domaine : +etat
Domaine : +reagir(Event)
Domaine : +Events
Domaine : +goto_next_event()

Machine : +domaine
Machine : +etat
Machine : +reagir(Event)
Machine : +nombre_echec

Etat : +etat_suivant(Event)
Etat : +temps_debut

Etat_Machine : +machine
Etat_Machine : +parlant

Etat_Domaine : +domaine
Etat_Domaine : +visiblement_libre
Etat_Domaine : +reelement_libre
Etat_Domaine : +machines_parlantes[]
Machine "0..*" o-- "1" Etat_Domaine

Etat_D_Collision : +Nombre_de_parlantes
Etat_Machine : +event_fin

Event_Timed : +time

Domaine "1" o-- "Many" Event

class Loi
Machine "many" *-- "1" Loi : Composition
Loi : -distribution
Loi : +Tir(n_echec)

@enduml